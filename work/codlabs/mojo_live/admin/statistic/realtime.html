<?php include "../include/header.html"; ?>

<hr class="layout" />

<div class="contents" id="contents">

    <div class="area-title">
        <h3>5분 동접 현황</h3>
    </div>
    
    <div class="area-flow">
        <div class="grid-flow">
            <canvas id="myChart" style="height:700px; width:100%"></canvas>
        </div>
        
        <div class="grid-flow fix" style="width:250px">
            <div class="area-setting mt0">
                <div class="picker-date">
                    <input type="text" id="datepicker" name="" class="form-input w120 e-pick_date">
                </div>
                <a href="javascript:;" class="button-normal">검색</a>
            </div>
            <div class="table-scroll mt0">
                <div class="table-layout head">
                    <table>
                        <caption>5분 단위 방문자수</caption>
                        <colgroup>
                            <col style="width:100px">
                            <col style="width:auto">
                        </colgroup>
                        <tbody class="center">
                            <tr>
                                <td>시간대</td>
                                <td>방문자수(PV)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="table-layout body" style="max-height:630px">
                    <table>
                        <caption>5분 단위 방문자수</caption>
                        <colgroup>
                            <col style="width:100px">
                            <col style="width:auto">
                        </colgroup>
                        <tbody class="center">
                            <tr>
                                <td>23:35</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                            <tr>
                                <td>23:30</td>
                                <td>150</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

</div><!-- //contents -->

<hr class="layout" />

<script type="text/javascript" src="../js/chart.js"></script>
<script>
    $(document).ready(function(){
    
        var showZeroPlugin = {
            beforeRender: function (chartInstance) {
                var datasets = chartInstance.config.data.datasets;
        
                for (var i = 0; i < datasets.length; i++) {
                    var meta = datasets[i]._meta;
                    // It counts up every time you change something on the chart so
                    // this is a way to get the info on whichever index it's at
                    var metaData = meta[Object.keys(meta)[0]];
                    var bars = metaData.data;
        
                    for (var j = 0; j < bars.length; j++) {
                        var model = bars[j]._model;
        
                        if (metaData.type === "horizontalBar" && model.base === model.x) {
                            model.x = model.base + 2;
                        } else if (model.base === model.y) {
                            model.y = model.base - 2;
                        }
                    }
                }
        
            }
        };
        
        Chart.pluginService.register(showZeroPlugin);
    
        var ctx = document.getElementById('myChart').getContext('2d');
        
        var myChart = new Chart(ctx, {
            responsive: true,
            type: 'line',
            data: {
                labels: ['01/03','','','','','','','','','','','','','','15/03','','','','','','','','','','','','','','','','31/03'],
                datasets: [{
                    label: '# steps',
                     data: [0,0,0,0,0,0,0,0,0,0,0,0,0,232,1241,0,0,1738,1539,3024,854,0,56,0,896,302,1211,2511,1020,4,0 ],
                    //data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
                    backgroundColor:'rgba(255,255,255,0)',
                    borderColor: '#fd344f',
                    borderWidth: 1,
                    pointStyle:'circle',
                    radius:2
                }]
            },
            options: {
                borderColor: "#d8d8d8",
                showAllTooltips: true,
                scaleShowValues: true,
                scales: {
                    xAxes: [{
                        ticks: {
                            fontFamily: "HelveticaNeue-Light,AppleSDGothicNeo-Light,'Malgun Gothic','맑은 고딕', sans-serif",
                            fontSize: 14,
                            fontColor:"#7d7d7d",
                            fontStyle:"400",
                            autoSkip: false,
                            maxRotation: 0
                        },
                        gridLines: {
                            display: false
                        },
                        maxBarThickness: 17,
                        autoSkip: false
                    }],
                    yAxes: [{
                        ticks: {
                            fontFamily: "HelveticaNeue-Light,AppleSDGothicNeo-Light,'Malgun Gothic','맑은 고딕', sans-serif",
                            fontSize: 14,
                            fontColor:"#7d7d7d",
                            beginAtZero : true,
                            callback: function(value, index, values) {
                                if (Math.floor(value) === value) {
                                    return value;
                                }
                            }
                        }
                    }]
                },
                tooltips: {
                    enabled:false
                },
                legend: {
                    display: false
                }
            }
        });
        
    });
  
</script>

<?php include "../include/footer.html"; ?>